<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Sports 1v1 - Basketball & Soccer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Game Selection Screen -->
    <div id="game-select">
        <h1>Sports 1v1</h1>
        <div class="coin-display">ğŸª™ <span id="select-coins">0</span></div>
        <div class="game-cards">
            <button id="select-basketball" class="game-card">
                <div class="game-card-icon">ğŸ€</div>
                <div class="game-card-title">Basketball</div>
                <div class="game-card-desc">First to 21 wins</div>
            </button>
            <button id="select-soccer" class="game-card">
                <div class="game-card-icon">âš½</div>
                <div class="game-card-title">Soccer</div>
                <div class="game-card-desc">First to 10 goals</div>
            </button>
        </div>
    </div>

    <!-- Main Menu (after game selected) -->
    <div id="main-menu" style="display: none;">
        <h1 id="menu-title">ğŸ€ Basketball 1v1</h1>
        <div class="coin-display">ğŸª™ <span id="menu-coins">0</span></div>
        <div class="menu-buttons">
            <button id="vs-cpu-btn" class="menu-btn">Play vs CPU</button>
            <button id="multiplayer-btn" class="menu-btn">Play Online</button>
            <button id="shop-btn" class="menu-btn shop-menu-btn">Shop & Upgrades</button>
            <button id="back-to-select-btn" class="menu-btn cancel-btn">Back to Games</button>
        </div>
        <div id="connection-status"></div>
    </div>

    <!-- Shop Screen -->
    <div id="shop-screen" style="display: none;">
        <div class="shop-content">
            <div class="shop-header">
                <h2>Shop & Upgrades</h2>
                <div class="coin-display">ğŸª™ <span id="shop-coins">0</span></div>
            </div>
            <h3 class="shop-section-title">Stat Upgrades</h3>
            <div id="upgrades-list" class="shop-grid"></div>
            <h3 class="shop-section-title">Cosmetics</h3>
            <div id="cosmetics-list" class="shop-grid"></div>
            <button id="shop-back-btn" class="menu-btn cancel-btn">Back to Menu</button>
        </div>
    </div>

    <!-- Game Over Overlay -->
    <div id="game-over-overlay" style="display: none;">
        <div class="game-over-content">
            <h2 id="game-over-result">YOU WIN!</h2>
            <div class="coin-earnings">
                <div class="earning-row"><span>Result Bonus</span><span>+<span id="coin-base">0</span> ğŸª™</span></div>
                <div class="earning-row"><span>Score Bonus</span><span>+<span id="coin-bonus">0</span> ğŸª™</span></div>
                <div class="earning-row total"><span>Total</span><span>+<span id="coin-total">0</span> ğŸª™</span></div>
                <div class="earning-row balance"><span>Balance</span><span><span id="coin-balance">0</span> ğŸª™</span></div>
            </div>
            <button id="game-over-continue-btn" class="menu-btn">Continue</button>
        </div>
    </div>

    <!-- Matchmaking Lobby -->
    <div id="matchmaking-lobby" style="display: none;">
        <div class="lobby-content">
            <h2>Finding Match</h2>
            <div class="search-animation">
                <div class="search-dots">
                    <span></span><span></span><span></span>
                </div>
            </div>
            <p id="lobby-status">Searching for opponent...</p>
            <button id="cancel-search-btn" class="menu-btn cancel-btn">Cancel</button>
        </div>
    </div>

    <!-- Ready Lobby (after match found) -->
    <div id="ready-lobby" style="display: none;">
        <div class="lobby-content">
            <h2>Opponent Found!</h2>
            <div class="players-ready">
                <div class="player-card you">
                    <div class="player-avatar">ğŸ€</div>
                    <p>You</p>
                    <div id="your-ready-status" class="ready-status not-ready">Not Ready</div>
                </div>
                <div class="vs-text">VS</div>
                <div class="player-card opponent">
                    <div class="player-avatar">ğŸ€</div>
                    <p>Opponent</p>
                    <div id="opponent-ready-status" class="ready-status not-ready">Not Ready</div>
                </div>
            </div>
            <button id="ready-btn" class="menu-btn ready-btn">Ready!</button>
            <button id="leave-lobby-btn" class="menu-btn cancel-btn">Leave</button>
        </div>
    </div>

    <div id="game-container" style="display: none;">
        <!-- UI Overlay -->
        <div id="ui-overlay">
            <div id="top-bar">
                <div id="level-display">Score: <span id="level-number">0 - 0</span></div>
                <div id="controls">
                    <button id="restart-btn" title="Restart (R)">â†»</button>
                    <button id="mute-btn" title="Mute">ğŸ”Š</button>
                </div>
            </div>

            <div id="message-container">
                <div id="message"></div>
            </div>
        </div>

        <!-- Game Canvas -->
        <canvas id="game-canvas"></canvas>

        <!-- Mobile Controls -->
        <div id="mobile-controls">
            <!-- Left side: D-pad for movement -->
            <div id="dpad-container">
                <button id="dpad-left" class="dpad-btn">â—€</button>
                <button id="dpad-right" class="dpad-btn">â–¶</button>
            </div>

            <!-- Right side: Action buttons -->
            <div id="action-buttons">
                <button id="btn-jump" class="action-btn jump-btn">JUMP</button>
                <button id="btn-shoot" class="action-btn shoot-btn">SHOOT</button>
                <button id="btn-defend" class="action-btn defend-btn">DEF</button>
            </div>
        </div>
    </div>

    <!-- Game Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
